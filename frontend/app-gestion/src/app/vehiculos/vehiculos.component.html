<div class="ios-container">
  
  <!-- HEADER -->
  <div class="header-section">
    <h1>Vehículos</h1>
  </div>

  <!-- BARRA DE BÚSQUEDA -->
  <div class="search-bar">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
    <input 
      type="text" 
      placeholder="Buscar placa, marca o modelo..." 
      [ngModel]="filtro()"
      (ngModelChange)="filtro.set($event)"
    >
  </div>

  <!-- GRID DE TARJETAS -->
  <div class="vehicle-grid">
    
    <div class="vehicle-card" *ngFor="let v of vehiculosFiltrados()">
      <div class="card-left">
        <div class="icon-box">
          <!-- Icono de camión estilo iOS (Outline) -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
        </div>
        <div class="info">
          <h3>{{ v.placa | uppercase }}</h3>
          <p>{{ v.marca }} {{ v.modelo }}</p>
        </div>
      </div>
      
      <div class="card-right">
        <!-- Indicador de estado con luz -->
        <span class="badge" [class.activo]="v.activo" [class.inactivo]="!v.activo">
          {{ v.activo ? 'Activo' : 'Inactivo' }}
        </span>

        <div class="actions-group">
          <!-- Botón Editar -->
          <button class="action-btn edit" (click)="abrirModalEditar(v)" title="Editar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
          </button>
          <!-- Botón Eliminar -->
          <button class="action-btn delete" (click)="eliminarVehiculo(v.id)" title="Eliminar">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mensaje si no hay datos -->
    <div *ngIf="vehiculosFiltrados().length === 0" style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #9CA3AF;">
      <p>No se encontraron vehículos.</p>
    </div>

  </div>

  <!-- BOTÓN FLOTANTE (FAB) -->
  <button class="fab-add" (click)="abrirModalCrear()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
  </button>

</div>

<!-- MODAL ESTILO WEB MODERNA (COMPACTO Y CENTRADO) -->
<div class="modal-overlay" *ngIf="modalAbierto()" (click)="cerrarModal()">
  <div class="modal-card" (click)="$event.stopPropagation()">
    
    <div class="modal-header">
      <h2>{{ vehiculoEnEdicion ? 'Editar Vehículo' : 'Nuevo Vehículo' }}</h2>
      <button class="close-btn" (click)="cerrarModal()">✕</button>
    </div>

    <div class="input-group">
      <label>PLACA</label>
      <input type="text" [(ngModel)]="nuevoVehiculo.placa" placeholder="EJ: TUK-909" style="text-transform: uppercase; font-weight: 600;">
    </div>

    <div class="input-group">
      <label>MARCA</label>
      <select [(ngModel)]="nuevoVehiculo.marca">
        <option value="" disabled selected>Selecciona marca</option>
        <option *ngFor="let m of marcasDisponibles" [value]="m">{{ m }}</option>
      </select>
    </div>

    <div class="input-group">
      <label>MODELO (AÑO)</label>
      <input type="number" [(ngModel)]="nuevoVehiculo.modelo" placeholder="2024">
    </div>

    <div class="toggle-row">
      <span>Operativo</span>
      <label class="switch">
        <input type="checkbox" [(ngModel)]="nuevoVehiculo.activo">
        <span class="slider"></span>
      </label>
    </div>

    <button class="save-btn" (click)="guardarVehiculo()">
      {{ vehiculoEnEdicion ? 'Actualizar' : 'Guardar Vehículo' }}
    </button>

  </div>
</div>