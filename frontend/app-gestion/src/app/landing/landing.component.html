<div class="landing-container">
  <div class="bg-gradient"></div>
  
  <div class="content-wrapper">
    <!-- LADO IZQUIERDO - Branding -->
    <div class="left-panel">
      <div class="brand-content">
        <div class="logo-section">
          <div class="logo-header">
            <h1 class="brand-name">
              Gestion<span>Truck</span>
            </h1>
          </div>
          <div class="badge">GESTIÓN INTELIGENTE</div>
        </div>
        
        <p class="brand-tagline">Sistema Ambiental Inteligente</p>
        
        <div class="features-list">
          <div class="feature-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
            <span>Optimización de rutas</span>
          </div>
          <div class="feature-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
            <span>Seguimiento en tiempo real</span>
          </div>
          <div class="feature-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
            <span>Gestión sostenible</span>
          </div>
        </div>
      </div>
    </div>

    <!-- LADO DERECHO - Formulario -->
    <div class="right-panel">
      <div class="form-container">
        <h2 class="form-title">{{ modoRegistro() ? 'Crear cuenta' : 'Iniciar sesión' }}</h2>
        <p class="form-subtitle">{{ modoRegistro() ? 'Únete a la gestión inteligente' : 'Accede a tu cuenta' }}</p>

        <form (ngSubmit)="modoRegistro() ? onRegister() : onLogin()">
          <div class="input-group">
            <label for="correo">Correo electrónico</label>
            <input
              id="correo"
              type="email"
              [(ngModel)]="correo"
              name="correo"
              placeholder="tu@correo.com"
              required
              (focus)="correoTocado.set(true)"
            />
            <span *ngIf="modoRegistro() && !correoTocado()" class="input-warning">
              ⚠️ Usa un correo válido para recuperar tu cuenta
            </span>
          </div>

          <div class="input-group">
            <label for="contrasena">Contraseña</label>
            <div class="password-input-wrapper">
              <input
                id="contrasena"
                [type]="mostrarContrasena() ? 'text' : 'password'"
                [(ngModel)]="contrasena"
                name="contrasena"
                placeholder="••••••••"
                required
                [minlength]="modoRegistro() ? 6 : 0"
              />
              <button 
                type="button" 
                class="btn-toggle-password" 
                (click)="toggleMostrarContrasena()"
                [title]="mostrarContrasena() ? 'Ocultar contraseña' : 'Mostrar contraseña'"
              >
                <!-- Icono OJO ABIERTO -->
                <svg *ngIf="!mostrarContrasena()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <!-- Icono OJO CERRADO -->
                <svg *ngIf="mostrarContrasena()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                  <line x1="1" y1="1" x2="23" y2="23"></line>
                </svg>
              </button>
            </div>
            <span *ngIf="modoRegistro()" class="input-hint">Mínimo 6 caracteres</span>
          </div>

          <a *ngIf="!modoRegistro()" href="#" class="forgot-link" (click)="abrirModalRecuperacion(); $event.preventDefault()">¿Olvidaste tu contraseña?</a>

          <button type="submit" class="btn-primary">
            {{ modoRegistro() ? 'Registrarse' : 'Iniciar sesión' }}
          </button>
        </form>

        <div class="divider">
          <span>O continúa con</span>
        </div>

        <div class="social-buttons">
          <button type="button" class="btn-social google" (click)="onGoogleLogin()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
              <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
              <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
              <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
            </svg>
            <span>Google</span>
          </button>

          <button type="button" class="btn-social github" (click)="onGitHubLogin()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
            </svg>
            <span>GitHub</span>
          </button>
        </div>

        <p class="toggle-text">
          {{ modoRegistro() ? '¿Ya tienes cuenta?' : '¿No tienes cuenta?' }}
          <a href="#" (click)="toggleModo(); $event.preventDefault()">
            {{ modoRegistro() ? 'Iniciar sesión' : 'Regístrate' }}
          </a>
        </p>
      </div>
    </div>
  </div>

  <!-- MODAL RECUPERAR CONTRASEÑA -->
  <div *ngIf="modalRecuperacion()" class="modal-overlay" (click)="cerrarModalRecuperacion()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Recuperar contraseña</h3>
        <button class="btn-close-modal" (click)="cerrarModalRecuperacion()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <p class="modal-description">Ingresa tu correo electrónico y te enviaremos un link para restablecer tu contraseña.</p>
        
        <div class="input-group">
          <label for="correoRecuperacion">Correo electrónico</label>
          <input
            id="correoRecuperacion"
            type="email"
            [(ngModel)]="correoRecuperacion"
            placeholder="tu@correo.com"
          />
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn-secondary-modal" (click)="cerrarModalRecuperacion()">Cancelar</button>
        <button class="btn-primary" (click)="enviarEmailRecuperacion()">Enviar link</button>
      </div>
    </div>
  </div>

  <!-- MODAL NUEVA CONTRASEÑA -->
  <div *ngIf="modalNuevaContrasena()" class="modal-overlay" (click)="cerrarModalNuevaContrasena()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Nueva contraseña</h3>
        <button class="btn-close-modal" (click)="cerrarModalNuevaContrasena()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <p class="modal-description">Escribe tu nueva contraseña</p>
        
        <div class="input-group">
          <label for="nuevaContrasena">Nueva contraseña</label>
          <input
            id="nuevaContrasena"
            type="password"
            [(ngModel)]="nuevaContrasena"
            placeholder="Mínimo 6 caracteres"
            minlength="6"
          />
        </div>
        
        <div class="input-group">
          <label for="confirmarContrasena">Confirmar contraseña</label>
          <input
            id="confirmarContrasena"
            type="password"
            [(ngModel)]="confirmarContrasena"
            placeholder="Repite tu contraseña"
            minlength="6"
          />
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn-secondary-modal" (click)="cerrarModalNuevaContrasena()">Cancelar</button>
        <button class="btn-primary" (click)="actualizarContrasena()">Actualizar contraseña</button>
      </div>
    </div>
  </div>
</div>