<div class="home-container">
  
  <!-- HEADER -->
  <header class="page-header">
    <h1>Dashboard</h1>
    <p class="subtitle">Resumen inteligente de GestionTruck</p>
  </header>

  <!-- LOADING STATE -->
  <div *ngIf="loading()" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando estadísticas...</p>
  </div>

  <!-- STATS CARDS -->
  <div *ngIf="!loading()" class="stats-grid">
    <div *ngFor="let stat of stats()" class="stat-card">
      <div class="stat-icon" [style.background]="stat.color + '15'">
        <!-- Icono de CAMIÓN para Total Vehículos -->
        <svg *ngIf="stat.icon === 'vehiculo'" viewBox="0 0 24 24" fill="none" [attr.stroke]="stat.color" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <rect x="1" y="6" width="15" height="10" rx="1"/>
          <path d="M16 10h4l3 3v3h-7v-6z"/>
          <circle cx="5.5" cy="17.5" r="2.5"/>
          <circle cx="18.5" cy="17.5" r="2.5"/>
        </svg>
        <!-- Otros iconos con fill -->
        <svg *ngIf="stat.icon !== 'vehiculo'" viewBox="0 0 24 24" [attr.fill]="stat.color">
          <path [attr.d]="stat.icon"/>
        </svg>
      </div>
      
      <div class="stat-content">
        <p class="stat-title">{{ stat.title }}</p>
        <h2 class="stat-value">{{ stat.value }}</h2>
        <p *ngIf="stat.subtitle" class="stat-subtitle">{{ stat.subtitle }}</p>
      </div>
    </div>

    <!-- CARD DE CLIMA -->
    <div class="stat-card weather-card" *ngIf="!loadingWeather() && weather()">
      <div class="stat-icon weather-icon-bg">
        <!-- SOL -->
        <svg *ngIf="getWeatherIcon(weather()!.main, weather()!.icon) === 'sun'" viewBox="0 0 24 24" fill="none" stroke="#FCD34D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>

        <!-- LUNA -->
        <svg *ngIf="getWeatherIcon(weather()!.main, weather()!.icon) === 'moon'" viewBox="0 0 24 24" fill="none" stroke="#E0E7FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>

        <!-- NUBES -->
        <svg *ngIf="getWeatherIcon(weather()!.main, weather()!.icon) === 'clouds'" viewBox="0 0 24 24" fill="none" stroke="#93C5FD" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
        </svg>

        <!-- LLUVIA -->
        <svg *ngIf="getWeatherIcon(weather()!.main, weather()!.icon) === 'rain'" class="rain-icon" viewBox="0 0 24 24" fill="none" stroke="#60A5FA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M16 13v8m-8-8v8m4-10v10"/>
          <path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"/>
        </svg>

        <!-- TORMENTA -->
        <svg *ngIf="getWeatherIcon(weather()!.main, weather()!.icon) === 'storm'" viewBox="0 0 24 24" fill="none" stroke="#FDE68A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"/>
          <polyline points="13 11 9 17 15 17 11 23"/>
        </svg>

        <!-- NIEBLA -->
        <svg *ngIf="getWeatherIcon(weather()!.main, weather()!.icon) === 'fog'" viewBox="0 0 24 24" fill="none" stroke="#D1D5DB" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/>
          <line x1="8" y1="19" x2="8.01" y2="19"/>
          <line x1="8" y1="22" x2="8.01" y2="22"/>
          <line x1="12" y1="19" x2="12.01" y2="19"/>
          <line x1="12" y1="22" x2="12.01" y2="22"/>
          <line x1="16" y1="19" x2="16.01" y2="19"/>
          <line x1="16" y1="22" x2="16.01" y2="22"/>
        </svg>
      </div>
      
      <div class="stat-content">
        <p class="stat-title">CLIMA · {{ currentDay() }}</p>
        <h2 class="stat-value">{{ weather()!.temp }}°C</h2>
        <p class="stat-subtitle weather-info">
          {{ weather()!.description | titlecase }} · H: {{ weather()!.humidity }}% · V: {{ weather()!.windSpeed }} km/h
        </p>
      </div>
    </div>

    <!-- LOADING CLIMA -->
    <div class="stat-card weather-card" *ngIf="loadingWeather()">
      <div class="stat-icon weather-icon-bg">
        <div class="spinner-small"></div>
      </div>
      <div class="stat-content">
        <p class="stat-title">CLIMA</p>
        <h2 class="stat-value">--°C</h2>
        <p class="stat-subtitle">Cargando...</p>
      </div>
    </div>
  </div>

</div>